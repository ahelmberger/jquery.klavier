/*! jquery.klavier - v0.9.0 - 2014-03-09
* https://github.com/learningmedia/jquery.klavier
* Copyright (c) 2014 Andreas Helmberger & Ulrich Kaiser; Licensed MIT */
(function(e,t){var i=0,r=120,s=.6,n=.6,a="klavier",o=[1,3,6,8,10],l=function(e,t){e.css("position","relative").addClass(t.cssPrefix+"-container")},h=function(t,i){var r,a,o=f.getWhiteKeyCount(i.startKey,i.endKey),l=t.innerWidth()/o,h=s*l,d=t.innerHeight(),u=n*d,c=0;for(a=i.startKey;i.endKey>=a;a++)r=f.isBlackKey(a),e("<div></div>").css({position:"absolute",width:(r?h:l)+"px",height:(r?u:d)+"px",top:"0px",left:(r?c-h/2:c)+"px",zIndex:r?i.zIndex+1:i.zIndex}).addClass(i.cssPrefix+"-key").addClass(i.cssPrefix+(r?"-black-key":"-white-key")).attr("data-value",a).appendTo(t),r||(c+=l)},d=function(t){return parseInt(e(t).data("value"),10)},f=function(t,i){this.options=e.extend({},f.defaults,i),this.$el=e(t),this.$el.data(a,this),l(this.$el,this.options),h(this.$el,this.options)};f.prototype.destroy=function(){this.$el.removeData(a),this.$el.removeClass(this.options.cssPrefix+"-container"),this.$el.off("."+a),this.$el.empty(),this.$el=null},f.prototype.getSelectedValues=function(){return this.$el.find("."+this.options.cssPrefix+"-selected-key").get().map(function(e){return d(e)})},f.prototype.setSelectedValues=function(t){this.$el.find("."+this.options.cssPrefix+"-key").each(function(i,r){var s=-1!==t.indexOf(d(r));e(r).toggleClass(this.options.cssPrefix+"-selected-key",s)}.bind(this))},f.getOrCreate=function(t,i){return e(t).data(a)||new f(t,i)},f.isBlackKey=function(e){var t=e%12;return-1!==o.indexOf(t)},f.getWhiteKeyCount=function(e,t){var i,r=0;for(i=e;t>=i;i++)f.isBlackKey(i)||(r+=1);return r},f.validateOptions=function(e){if(e.endKey<=e.startKey)throw Error("The end key must be greater than the start key.");if(i>e.startKey||e.endKey>r)throw Error("The key values must be grater than or equal to "+i+" and less than or euqal to "+r+".");if(f.isBlackKey(e.startKey))throw Error("The keyboard has to start with a white key.");if(f.isBlackKey(e.endKey))throw Error("The keyboard has to end with a white key.")},f.defaults={startKey:60,endKey:71,selectionMode:"multiple",cssPrefix:"klavier",zIndex:999},e.fn.klavier=function(e){var i=Array.prototype.slice.call(arguments,1);if("string"==typeof e){var r=this.get().map(function(t){var r=f.getOrCreate(t),s=r[e].apply(r,i);return s});return r.length?r[0]:t}return this.each(function(){f.getOrCreate(this,e)})},e.fn.klavier.defaults=f.defaults,e.fn.klavier._constructor=f})(jQuery);